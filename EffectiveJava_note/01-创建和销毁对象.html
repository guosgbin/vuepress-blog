<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.62" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://blog.guosgbin.cn/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html"><meta property="og:title" content="ç¬¬ä¸€ç« -åˆ›å»ºå’Œé”€æ¯å¯¹è±¡"><meta property="og:description" content="ç‰ˆæœ¬ å†…å®¹ æ—¶é—´ ---- ---- ---------------------- V1 æ–°å»º 2023å¹´07æœˆ13æ—¥23:49:21 ç¬¬ä¸€ç« ï¼šåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼Œä¸»è¦åŒ…å«ä¸‹é¢ 9 æ¡ã€‚ 1. ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨ï¼› 2. é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼ï¼› 3. ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§ï¼› 4. é€šè¿‡ç§..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-07-14T06:59:35.000Z"><meta property="article:author" content="è¶…å¨è“çŒ« Dylan Kwok"><meta property="article:modified_time" content="2023-07-14T06:59:35.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ç¬¬ä¸€ç« -åˆ›å»ºå’Œé”€æ¯å¯¹è±¡","image":[""],"dateModified":"2023-07-14T06:59:35.000Z","author":[{"@type":"Person","name":"è¶…å¨è“çŒ« Dylan Kwok","url":"","email":"guosgbin@163.com"}]}</script><link rel="icon" href="/å°ç†ŠçŒ«.svg"><title>ç¬¬ä¸€ç« -åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</title><meta name="description" content="ç‰ˆæœ¬ å†…å®¹ æ—¶é—´ ---- ---- ---------------------- V1 æ–°å»º 2023å¹´07æœˆ13æ—¥23:49:21 ç¬¬ä¸€ç« ï¼šåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼Œä¸»è¦åŒ…å«ä¸‹é¢ 9 æ¡ã€‚ 1. ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨ï¼› 2. é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼ï¼› 3. ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§ï¼› 4. é€šè¿‡ç§...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-542658da.css" as="style"><link rel="stylesheet" href="/assets/style-542658da.css">
    <link rel="modulepreload" href="/assets/app-ad2dff0a.js"><link rel="modulepreload" href="/assets/01-åˆ›å»ºå’Œé”€æ¯å¯¹è±¡.html-6bda95b7.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/01-åˆ›å»ºå’Œé”€æ¯å¯¹è±¡.html-98280ce1.js"><link rel="prefetch" href="/assets/index.html-d9edbc0d.js" as="script"><link rel="prefetch" href="/assets/index.html-c4f42206.js" as="script"><link rel="prefetch" href="/assets/01-CASå’ŒUnsafeçš„APIåˆ†æ.html-612c4d6a.js" as="script"><link rel="prefetch" href="/assets/02-åŸºæœ¬ç±»å‹åŸå­ç±»AtomicLong.html-4083b8fd.js" as="script"><link rel="prefetch" href="/assets/03-å¼•ç”¨ç±»å‹åŸå­ç±»AtomicReference.html-8442553d.js" as="script"><link rel="prefetch" href="/assets/04-åŸå­æ•°ç»„ç±»AtomicLongArray.html-74e4c741.js" as="script"><link rel="prefetch" href="/assets/05-åŸå­æ“ä½œç±»AtomicReferenceFieldUpdater.html-d0310b2a.js" as="script"><link rel="prefetch" href="/assets/06-é«˜æ€§èƒ½åŸå­ç±»LongAdder.html-d6e3da8b.js" as="script"><link rel="prefetch" href="/assets/07-LockSupportåˆ†æ.html-8117dd17.js" as="script"><link rel="prefetch" href="/assets/08-AQSç®€å•ä»‹ç».html-30b6ef5b.js" as="script"><link rel="prefetch" href="/assets/09-åŸºäºReentrantLockåˆ†æAQSçš„ç‹¬å æ¨¡å¼.html-2423c430.js" as="script"><link rel="prefetch" href="/assets/10-åŸºäºCountDownLatchåˆ†æAQSçš„å…±äº«æ¨¡å¼.html-91ef4833.js" as="script"><link rel="prefetch" href="/assets/11-AQSçš„Conditionæœºåˆ¶.html-836364af.js" as="script"><link rel="prefetch" href="/assets/12-ä¿¡å·é‡Semaphore.html-3509682c.js" as="script"><link rel="prefetch" href="/assets/13-å¾ªç¯æ æ …CyclicBarrier.html-812d137d.js" as="script"><link rel="prefetch" href="/assets/14-é˜¶æ®µPhaser.html-d684f4a1.js" as="script"><link rel="prefetch" href="/assets/15-äº¤æ¢Exchanger.html-b9bf24f3.js" as="script"><link rel="prefetch" href="/assets/16-è¯»å†™é”ReentrantReadWriteLock.html-de44a1d3.js" as="script"><link rel="prefetch" href="/assets/17-Futureæ¨¡å¼-FutureTask.html-641c6250.js" as="script"><link rel="prefetch" href="/assets/18-çº¿ç¨‹æ± ä½“ç³»æ¦‚è¿°.html-dbcc52e5.js" as="script"><link rel="prefetch" href="/assets/19-çº¿ç¨‹æ± ä½“ç³»-AbstractExecutorService.html-fbd70afb.js" as="script"><link rel="prefetch" href="/assets/20-çº¿ç¨‹æ± ä½“ç³»-ThreadPoolExecutor.html-a274637a.js" as="script"><link rel="prefetch" href="/assets/21-çº¿ç¨‹æ± ä½“ç³»-ScheduledThreadPoolExecutor.html-707ffd40.js" as="script"><link rel="prefetch" href="/assets/22-CopyOnWriteArrayListå†™æ—¶å¤åˆ¶.html-914977b9.js" as="script"><link rel="prefetch" href="/assets/23-CopyOnWriteArraySetå†™æ—¶å¤åˆ¶.html-6c9c3cf6.js" as="script"><link rel="prefetch" href="/assets/24-ConcurrentSkipListMapè·³è¡¨.html-6cff54bf.js" as="script"><link rel="prefetch" href="/assets/25-ConcurrentSkipListSetè·³è¡¨.html-36cf4f7d.js" as="script"><link rel="prefetch" href="/assets/26-ConcurrentHashMapæºç åˆ†æ.html-a3bba8a9.js" as="script"><link rel="prefetch" href="/assets/27-é˜»å¡é˜Ÿåˆ—ArrayBlockingQueue.html-cd091357.js" as="script"><link rel="prefetch" href="/assets/28-é˜»å¡é˜Ÿåˆ—LinkedBlockingQueue.html-d3579ee7.js" as="script"><link rel="prefetch" href="/assets/29-é˜»å¡é˜Ÿåˆ—LinkedBlockingDeque.html-32c13680.js" as="script"><link rel="prefetch" href="/assets/30-é˜»å¡é˜Ÿåˆ—PriorityBlockingQueue.html-b5455c77.js" as="script"><link rel="prefetch" href="/assets/31-é˜»å¡é˜Ÿåˆ—DelayQueue.html-7759c195.js" as="script"><link rel="prefetch" href="/assets/32-é˜»å¡é˜Ÿåˆ—SynchronousQueue.html-97ed879a.js" as="script"><link rel="prefetch" href="/assets/33-é˜»å¡é˜Ÿåˆ—LinkedTransferQueue.html-3281c1b4.js" as="script"><link rel="prefetch" href="/assets/index.html-f5239cf3.js" as="script"><link rel="prefetch" href="/assets/SPIæœºåˆ¶.html-a1ca3921.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis01ï¼šmyabtisçš„æ•´ä½“æ¶æ„.html-f25c0705.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis02ï¼šå…¥é—¨æ¡ˆä¾‹.html-30e68cd3.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis03ï¼šè§£æå…¨å±€é…ç½®æ–‡ä»¶.html-2db85266.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis04ï¼šè§£æMapperæ˜ å°„æ–‡ä»¶.html-60756a5b.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis05ï¼šè§£æStatementæ“ä½œèŠ‚ç‚¹.html-31e11b60.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis06ï¼šè§£æSQLè¯­å¥.html-a9181b56.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis07ï¼šJavaæ–¹æ³•å’ŒSQLè¯­å¥ç»‘å®š.html-9bfa3db6.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis08ï¼šè·å¾—SqlSession.html-e2a92940.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis09ï¼šExecutoræ‰§è¡Œå™¨.html-ad701715.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis10ï¼šç¼“å­˜æœºåˆ¶.html-f2daa10c.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis11ï¼šStatementHandler.html-95b30d9b.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis12ï¼šå‚æ•°è§£æå’Œèµ‹å€¼.html-5778c0ea.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis13ï¼šç»“æœé›†å¤„ç†.html-2ff72779.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis14ï¼šæ’ä»¶.html-76cc6bf8.js" as="script"><link rel="prefetch" href="/assets/01-æœåŠ¡ç«¯å¯åŠ¨æµç¨‹.html-d2fc1f19.js" as="script"><link rel="prefetch" href="/assets/02-æœåŠ¡ç«¯å¯åŠ¨æ·»åŠ ChannelInitializeråˆ°ç®¡é“.html-86cb5d6a.js" as="script"><link rel="prefetch" href="/assets/03-å®¢æˆ·ç«¯å¯åŠ¨æµç¨‹.html-becc83be.js" as="script"><link rel="prefetch" href="/assets/04-çº¿ç¨‹ä½“ç³»-NioEventLoopGroup.html-700e797e.js" as="script"><link rel="prefetch" href="/assets/05-çº¿ç¨‹ä½“ç³»-NioEventLoopç›¸å…³çˆ¶æ¥å£åˆ†æ.html-754320bc.js" as="script"><link rel="prefetch" href="/assets/06-çº¿ç¨‹ä½“ç³»-AbstractEventExecutor.html-5250cd42.js" as="script"><link rel="prefetch" href="/assets/07-çº¿ç¨‹ä½“ç³»-AbstractScheduledEventExecutor-ä¼˜å…ˆé˜Ÿåˆ—.html-e7bbaf32.js" as="script"><link rel="prefetch" href="/assets/08-çº¿ç¨‹ä½“ç³»-NioEventLoopæ¦‚è¿°.html-fce3fb2c.js" as="script"><link rel="prefetch" href="/assets/09-çº¿ç¨‹ä½“ç³»-NioEventLoopå¼€å¯SelectoråŠä¼˜åŒ–.html-6d8230cf.js" as="script"><link rel="prefetch" href="/assets/10-çº¿ç¨‹ä½“ç³»-NioEventLoopç»‘å®šçº¿ç¨‹.html-db947821.js" as="script"><link rel="prefetch" href="/assets/11-çº¿ç¨‹ä½“ç³»-NioEventLoopçš„runæ–¹æ³•.html-def4cc31.js" as="script"><link rel="prefetch" href="/assets/12-çº¿ç¨‹ä½“ç³»-NioEventLoopè§„é¿JDKçš„NIOç©ºå¾ªç¯bug.html-16ecaf4e.js" as="script"><link rel="prefetch" href="/assets/13-çº¿ç¨‹ä½“ç³»-NioEventLoopçš„ä¼˜é›…å…³é—­.html-912d668d.js" as="script"><link rel="prefetch" href="/assets/14-æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯çš„è¿æ¥(ACCEPT).html-63afdec1.js" as="script"><link rel="prefetch" href="/assets/15-å®¢æˆ·ç«¯å¤„ç†READäº‹ä»¶æ¦‚è¿°.html-b35daeb8.js" as="script"><link rel="prefetch" href="/assets/16-å®¢æˆ·ç«¯å¤„ç†READäº‹ä»¶è¯¦è§£åŠRecvByteBufAllocator.html-a9faccfa.js" as="script"><link rel="prefetch" href="/assets/17-Nettyç®¡é“æœºåˆ¶.html-ba70b238.js" as="script"><link rel="prefetch" href="/assets/18-Nettyå‘é€æ•°æ®æµç¨‹åŠå‡ºç«™ç¼“å†²åŒº.html-223d04a7.js" as="script"><link rel="prefetch" href="/assets/index.html-b475d8b0.js" as="script"><link rel="prefetch" href="/assets/Redis_BenchmarkåŸºå‡†æµ‹è¯•.html-dbf21951.js" as="script"><link rel="prefetch" href="/assets/Redis_Clusteré›†ç¾¤å’Œæ§½ç®¡ç†å‘½ä»¤.html-2b4a1244.js" as="script"><link rel="prefetch" href="/assets/Redis_Clusteré›†ç¾¤åŸºæœ¬ç‰¹æ€§å’Œé›†ç¾¤æ­å»º.html-42be726b.js" as="script"><link rel="prefetch" href="/assets/Redis_Clusteré›†ç¾¤ç®¡ç†å·¥å…·redis-cli.html-fc4f1503.js" as="script"><link rel="prefetch" href="/assets/Redis_Pipelineä¼˜åŒ–RTT.html-8a4aa041.js" as="script"><link rel="prefetch" href="/assets/Redis_Sentinelé«˜å¯ç”¨.html-6bcdb34a.js" as="script"><link rel="prefetch" href="/assets/Redis_keyè®¾è®¡è§„èŒƒ.html-ab90a7dc.js" as="script"><link rel="prefetch" href="/assets/Redisäº‹åŠ¡.html-e43061e1.js" as="script"><link rel="prefetch" href="/assets/Rediså†…å­˜æ·˜æ±°ç­–ç•¥.html-feabd314.js" as="script"><link rel="prefetch" href="/assets/Rediså‘å¸ƒè®¢é˜….html-68771977.js" as="script"><link rel="prefetch" href="/assets/Rediså¤åˆ¶.html-33b20d6f.js" as="script"><link rel="prefetch" href="/assets/Rediså¤§keyå’Œçƒ­keyé—®é¢˜.html-394d194e.js" as="script"><link rel="prefetch" href="/assets/Redisæ…¢æŸ¥è¯¢æ—¥å¿—.html-7fb06db0.js" as="script"><link rel="prefetch" href="/assets/RedisæŒä¹…åŒ–æœºåˆ¶.html-53af3f7a.js" as="script"><link rel="prefetch" href="/assets/Redisé”®ç©ºé—´é€šçŸ¥(keyspace notification).html-012bd277.js" as="script"><link rel="prefetch" href="/assets/redis-cli ä½¿ç”¨.html-f7ab22db.js" as="script"><link rel="prefetch" href="/assets/01-RocketMQæ¦‚è¿°.html-25463efe.js" as="script"><link rel="prefetch" href="/assets/02-NameServerå¯åŠ¨æµç¨‹.html-a514999f.js" as="script"><link rel="prefetch" href="/assets/03-Brokerå¯åŠ¨æµç¨‹.html-43c84806.js" as="script"><link rel="prefetch" href="/assets/04-RocketMQç½‘ç»œé€šä¿¡åŸç†.html-ac88de8d.js" as="script"><link rel="prefetch" href="/assets/05-RocketMQ æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨.html-ef7f1888.js" as="script"><link rel="prefetch" href="/assets/06-RocketMQç½‘ç»œé€šä¿¡æºç .html-b8e0bf43.js" as="script"><link rel="prefetch" href="/assets/07-NameServerä½œç”¨å’Œè·¯ç”±å…ƒä¿¡æ¯.html-82a23869.js" as="script"><link rel="prefetch" href="/assets/08-NameServerè·¯ç”±ç®¡ç†æºç åˆ†æ.html-8da2bd72.js" as="script"><link rel="prefetch" href="/assets/09-ç”Ÿäº§è€…ç›¸å…³ç±»åˆ†æ.html-08f6e840.js" as="script"><link rel="prefetch" href="/assets/10-ç”Ÿäº§è€…å¯åŠ¨æµç¨‹.html-d761cf07.js" as="script"><link rel="prefetch" href="/assets/11-ç”Ÿäº§è€…å‘é€æ¶ˆæ¯.html-743328bc.js" as="script"><link rel="prefetch" href="/assets/12-Brokerå­˜å‚¨æœºåˆ¶æ¦‚è¿°.html-5e7ed491.js" as="script"><link rel="prefetch" href="/assets/13-MappedFileå’ŒMappedFileQueueåˆ†æ.html-5b9afaf2.js" as="script"><link rel="prefetch" href="/assets/14-CommitLogåŸç†åˆ†æ.html-93362aa2.js" as="script"><link rel="prefetch" href="/assets/15-brokerçš„åˆ·ç›˜æœºåˆ¶.html-21e2029f.js" as="script"><link rel="prefetch" href="/assets/16-ConsumeQueueå’ŒIndexåŸç†åˆ†æ.html-ff18bade.js" as="script"><link rel="prefetch" href="/assets/17-brokerè¿‡æœŸæ–‡ä»¶åˆ é™¤æœºåˆ¶.html-89f05919.js" as="script"><link rel="prefetch" href="/assets/18-æ¶ˆè´¹è€…å¯åŠ¨æµç¨‹(TODO).html-988c43b3.js" as="script"><link rel="prefetch" href="/assets/19-æ¶ˆæ¯æ‹‰å–å…¥å£å’Œæ¶ˆæ¯é˜Ÿåˆ—è´Ÿè½½å‡è¡¡.html-7e4e20d4.js" as="script"><link rel="prefetch" href="/assets/20-æ¶ˆè´¹è€…å‘é€æ¶ˆæ¯æ‹‰å–è¯·æ±‚æµç¨‹.html-19825069.js" as="script"><link rel="prefetch" href="/assets/21-brokerå¤„ç†æ¶ˆæ¯æ‹‰å–è¯·æ±‚-1-ä¸»æµç¨‹.html-d9ca6fa4.js" as="script"><link rel="prefetch" href="/assets/22-brokerå¤„ç†æ¶ˆæ¯æ‹‰å–è¯·æ±‚-2-é•¿è½®è¯¢.html-0aba4f38.js" as="script"><link rel="prefetch" href="/assets/23-brokerå¤„ç†æ¶ˆæ¯æ‹‰å–è¯·æ±‚-3-è¯»å–æ¶ˆæ¯.html-729d741b.js" as="script"><link rel="prefetch" href="/assets/24-æ¶ˆè´¹è€…å¤„ç†ä»brokeræ‹‰å–çš„æ¶ˆæ¯.html-dcfb7d07.js" as="script"><link rel="prefetch" href="/assets/25-å¹¶å‘æ¶ˆè´¹åŸç†.html-5ef206ec.js" as="script"><link rel="prefetch" href="/assets/001-æœåŠ¡å™¨CPUé—®é¢˜-è§„å¾‹æ€§å³°åˆº.html-81aeb2c9.js" as="script"><link rel="prefetch" href="/assets/002-æœåŠ¡å™¨CPUé…ç½®é™ä½GCåˆ†æ.html-d27479f5.js" as="script"><link rel="prefetch" href="/assets/003-æœåŠ¡å™¨CPUä½¿ç”¨ç‡è¾ƒä½ä½†ç³»ç»Ÿè´Ÿè½½é«˜.html-13cce7d9.js" as="script"><link rel="prefetch" href="/assets/004-log4j2å†…å­˜æ³„éœ²å¯¼è‡´çš„é¢‘ç¹fullgc.html-a403b9d0.js" as="script"><link rel="prefetch" href="/assets/005-çº¿ç¨‹æ± çˆ¶å­ä»»åŠ¡ä½¿ç”¨ä¸å½“é€ æˆæ­»é”.html-362015fc.js" as="script"><link rel="prefetch" href="/assets/006-linuxç³»ç»Ÿå‚æ•°-è¿æ¥é˜Ÿåˆ—é•¿åº¦è¿‡å°å¯¼è‡´è¿æ¥ä¸¢å¼ƒ.html-7c9d02a0.js" as="script"><link rel="prefetch" href="/assets/007-redisé¢‘ç¹æ·˜æ±°-æ¸…é™¤redisçº¿ä¸Šæœªè®¾ç½®è¿‡æœŸæ—¶é—´çš„key.html-e760378c.js" as="script"><link rel="prefetch" href="/assets/é¡¹ç›®-IMé•¿è¿æ¥ä¼˜åŒ–.html-00c51a2b.js" as="script"><link rel="prefetch" href="/assets/é¡¹ç›®-æœåŠ¡é™çº§.html-6240bf01.js" as="script"><link rel="prefetch" href="/assets/é¡¹ç›®-çº¿ç¨‹æ± ä¼˜åŒ–.html-c4acfb51.js" as="script"><link rel="prefetch" href="/assets/JUCç›¸å…³é—®é¢˜.html-9dc4b717.js" as="script"><link rel="prefetch" href="/assets/JVMé—®é¢˜.html-17300c49.js" as="script"><link rel="prefetch" href="/assets/MySQLç›¸å…³é—®é¢˜.html-a6c2cd41.js" as="script"><link rel="prefetch" href="/assets/index.html-8f5e683a.js" as="script"><link rel="prefetch" href="/assets/Redisç›¸å…³é—®é¢˜.html-575f1ee1.js" as="script"><link rel="prefetch" href="/assets/äºŒåˆ†æŸ¥æ‰¾.html-6b017c38.js" as="script"><link rel="prefetch" href="/assets/äºŒå‰æ ‘.html-e277f749.js" as="script"><link rel="prefetch" href="/assets/ä»£ç éšæƒ³å½•é¢˜ç›®ç›®å½•.html-308825f0.js" as="script"><link rel="prefetch" href="/assets/HowToSayResume.html-3450420b.js" as="script"><link rel="prefetch" href="/assets/index.html-af6a830f.js" as="script"><link rel="prefetch" href="/assets/resume.html-3b3f8934.js" as="script"><link rel="prefetch" href="/assets/404.html-f3795607.js" as="script"><link rel="prefetch" href="/assets/index.html-1f3390c0.js" as="script"><link rel="prefetch" href="/assets/index.html-10b45510.js" as="script"><link rel="prefetch" href="/assets/index.html-dfd17ea5.js" as="script"><link rel="prefetch" href="/assets/index.html-2f392b9e.js" as="script"><link rel="prefetch" href="/assets/index.html-4060f68d.js" as="script"><link rel="prefetch" href="/assets/index.html-d5cde66b.js" as="script"><link rel="prefetch" href="/assets/index.html-d1380100.js" as="script"><link rel="prefetch" href="/assets/index.html-fa612327.js" as="script"><link rel="prefetch" href="/assets/01-CASå’ŒUnsafeçš„APIåˆ†æ.html-7e598071.js" as="script"><link rel="prefetch" href="/assets/02-åŸºæœ¬ç±»å‹åŸå­ç±»AtomicLong.html-8a4f8c79.js" as="script"><link rel="prefetch" href="/assets/03-å¼•ç”¨ç±»å‹åŸå­ç±»AtomicReference.html-bcf3c415.js" as="script"><link rel="prefetch" href="/assets/04-åŸå­æ•°ç»„ç±»AtomicLongArray.html-f19563e8.js" as="script"><link rel="prefetch" href="/assets/05-åŸå­æ“ä½œç±»AtomicReferenceFieldUpdater.html-51549640.js" as="script"><link rel="prefetch" href="/assets/06-é«˜æ€§èƒ½åŸå­ç±»LongAdder.html-49590d5d.js" as="script"><link rel="prefetch" href="/assets/07-LockSupportåˆ†æ.html-0bfef91c.js" as="script"><link rel="prefetch" href="/assets/08-AQSç®€å•ä»‹ç».html-34bfb4f7.js" as="script"><link rel="prefetch" href="/assets/09-åŸºäºReentrantLockåˆ†æAQSçš„ç‹¬å æ¨¡å¼.html-7fff6aa0.js" as="script"><link rel="prefetch" href="/assets/10-åŸºäºCountDownLatchåˆ†æAQSçš„å…±äº«æ¨¡å¼.html-e47aeda8.js" as="script"><link rel="prefetch" href="/assets/11-AQSçš„Conditionæœºåˆ¶.html-71a297f3.js" as="script"><link rel="prefetch" href="/assets/12-ä¿¡å·é‡Semaphore.html-457ec09b.js" as="script"><link rel="prefetch" href="/assets/13-å¾ªç¯æ æ …CyclicBarrier.html-b90a8fd2.js" as="script"><link rel="prefetch" href="/assets/14-é˜¶æ®µPhaser.html-b2552414.js" as="script"><link rel="prefetch" href="/assets/15-äº¤æ¢Exchanger.html-d569c50d.js" as="script"><link rel="prefetch" href="/assets/16-è¯»å†™é”ReentrantReadWriteLock.html-f1be4bf4.js" as="script"><link rel="prefetch" href="/assets/17-Futureæ¨¡å¼-FutureTask.html-53470cf2.js" as="script"><link rel="prefetch" href="/assets/18-çº¿ç¨‹æ± ä½“ç³»æ¦‚è¿°.html-f37bf09e.js" as="script"><link rel="prefetch" href="/assets/19-çº¿ç¨‹æ± ä½“ç³»-AbstractExecutorService.html-3817abc1.js" as="script"><link rel="prefetch" href="/assets/20-çº¿ç¨‹æ± ä½“ç³»-ThreadPoolExecutor.html-9f273979.js" as="script"><link rel="prefetch" href="/assets/21-çº¿ç¨‹æ± ä½“ç³»-ScheduledThreadPoolExecutor.html-49236ee7.js" as="script"><link rel="prefetch" href="/assets/22-CopyOnWriteArrayListå†™æ—¶å¤åˆ¶.html-7ed47a3e.js" as="script"><link rel="prefetch" href="/assets/23-CopyOnWriteArraySetå†™æ—¶å¤åˆ¶.html-0ccc2ea0.js" as="script"><link rel="prefetch" href="/assets/24-ConcurrentSkipListMapè·³è¡¨.html-aaecd5cb.js" as="script"><link rel="prefetch" href="/assets/25-ConcurrentSkipListSetè·³è¡¨.html-e6c30025.js" as="script"><link rel="prefetch" href="/assets/26-ConcurrentHashMapæºç åˆ†æ.html-977402c9.js" as="script"><link rel="prefetch" href="/assets/27-é˜»å¡é˜Ÿåˆ—ArrayBlockingQueue.html-dfc27d3b.js" as="script"><link rel="prefetch" href="/assets/28-é˜»å¡é˜Ÿåˆ—LinkedBlockingQueue.html-15cf3eb5.js" as="script"><link rel="prefetch" href="/assets/29-é˜»å¡é˜Ÿåˆ—LinkedBlockingDeque.html-63f9a57a.js" as="script"><link rel="prefetch" href="/assets/30-é˜»å¡é˜Ÿåˆ—PriorityBlockingQueue.html-eff99e30.js" as="script"><link rel="prefetch" href="/assets/31-é˜»å¡é˜Ÿåˆ—DelayQueue.html-1d1ff5ae.js" as="script"><link rel="prefetch" href="/assets/32-é˜»å¡é˜Ÿåˆ—SynchronousQueue.html-fd4f249f.js" as="script"><link rel="prefetch" href="/assets/33-é˜»å¡é˜Ÿåˆ—LinkedTransferQueue.html-0657c3c3.js" as="script"><link rel="prefetch" href="/assets/index.html-43cd0b04.js" as="script"><link rel="prefetch" href="/assets/SPIæœºåˆ¶.html-56aefee0.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis01ï¼šmyabtisçš„æ•´ä½“æ¶æ„.html-5d072aae.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis02ï¼šå…¥é—¨æ¡ˆä¾‹.html-1a23f9d0.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis03ï¼šè§£æå…¨å±€é…ç½®æ–‡ä»¶.html-663dc0a6.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis04ï¼šè§£æMapperæ˜ å°„æ–‡ä»¶.html-216e7a0d.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis05ï¼šè§£æStatementæ“ä½œèŠ‚ç‚¹.html-9bbf5fc9.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis06ï¼šè§£æSQLè¯­å¥.html-d1cddf98.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis07ï¼šJavaæ–¹æ³•å’ŒSQLè¯­å¥ç»‘å®š.html-92ca3503.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis08ï¼šè·å¾—SqlSession.html-5aa04133.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis09ï¼šExecutoræ‰§è¡Œå™¨.html-a6278018.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis10ï¼šç¼“å­˜æœºåˆ¶.html-9008fe39.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis11ï¼šStatementHandler.html-1f49ff5b.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis12ï¼šå‚æ•°è§£æå’Œèµ‹å€¼.html-6448fde5.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis13ï¼šç»“æœé›†å¤„ç†.html-16d18af3.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºMybatis14ï¼šæ’ä»¶.html-d3e6adfb.js" as="script"><link rel="prefetch" href="/assets/01-æœåŠ¡ç«¯å¯åŠ¨æµç¨‹.html-c51acfe8.js" as="script"><link rel="prefetch" href="/assets/02-æœåŠ¡ç«¯å¯åŠ¨æ·»åŠ ChannelInitializeråˆ°ç®¡é“.html-dff104a3.js" as="script"><link rel="prefetch" href="/assets/03-å®¢æˆ·ç«¯å¯åŠ¨æµç¨‹.html-d171bedb.js" as="script"><link rel="prefetch" href="/assets/04-çº¿ç¨‹ä½“ç³»-NioEventLoopGroup.html-c96f611f.js" as="script"><link rel="prefetch" href="/assets/05-çº¿ç¨‹ä½“ç³»-NioEventLoopç›¸å…³çˆ¶æ¥å£åˆ†æ.html-753d8be4.js" as="script"><link rel="prefetch" href="/assets/06-çº¿ç¨‹ä½“ç³»-AbstractEventExecutor.html-b08e2ff3.js" as="script"><link rel="prefetch" href="/assets/07-çº¿ç¨‹ä½“ç³»-AbstractScheduledEventExecutor-ä¼˜å…ˆé˜Ÿåˆ—.html-e78fd44c.js" as="script"><link rel="prefetch" href="/assets/08-çº¿ç¨‹ä½“ç³»-NioEventLoopæ¦‚è¿°.html-09658caf.js" as="script"><link rel="prefetch" href="/assets/09-çº¿ç¨‹ä½“ç³»-NioEventLoopå¼€å¯SelectoråŠä¼˜åŒ–.html-2dae02cd.js" as="script"><link rel="prefetch" href="/assets/10-çº¿ç¨‹ä½“ç³»-NioEventLoopç»‘å®šçº¿ç¨‹.html-b6583263.js" as="script"><link rel="prefetch" href="/assets/11-çº¿ç¨‹ä½“ç³»-NioEventLoopçš„runæ–¹æ³•.html-03e1e58c.js" as="script"><link rel="prefetch" href="/assets/12-çº¿ç¨‹ä½“ç³»-NioEventLoopè§„é¿JDKçš„NIOç©ºå¾ªç¯bug.html-3a0a884b.js" as="script"><link rel="prefetch" href="/assets/13-çº¿ç¨‹ä½“ç³»-NioEventLoopçš„ä¼˜é›…å…³é—­.html-ec434521.js" as="script"><link rel="prefetch" href="/assets/14-æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯çš„è¿æ¥(ACCEPT).html-9a6797d1.js" as="script"><link rel="prefetch" href="/assets/15-å®¢æˆ·ç«¯å¤„ç†READäº‹ä»¶æ¦‚è¿°.html-476b7894.js" as="script"><link rel="prefetch" href="/assets/16-å®¢æˆ·ç«¯å¤„ç†READäº‹ä»¶è¯¦è§£åŠRecvByteBufAllocator.html-2821515f.js" as="script"><link rel="prefetch" href="/assets/17-Nettyç®¡é“æœºåˆ¶.html-9c634e47.js" as="script"><link rel="prefetch" href="/assets/18-Nettyå‘é€æ•°æ®æµç¨‹åŠå‡ºç«™ç¼“å†²åŒº.html-6de6bc42.js" as="script"><link rel="prefetch" href="/assets/index.html-8275f66e.js" as="script"><link rel="prefetch" href="/assets/Redis_BenchmarkåŸºå‡†æµ‹è¯•.html-c11645e0.js" as="script"><link rel="prefetch" href="/assets/Redis_Clusteré›†ç¾¤å’Œæ§½ç®¡ç†å‘½ä»¤.html-1b2dabcb.js" as="script"><link rel="prefetch" href="/assets/Redis_Clusteré›†ç¾¤åŸºæœ¬ç‰¹æ€§å’Œé›†ç¾¤æ­å»º.html-44c199d5.js" as="script"><link rel="prefetch" href="/assets/Redis_Clusteré›†ç¾¤ç®¡ç†å·¥å…·redis-cli.html-0d920ef5.js" as="script"><link rel="prefetch" href="/assets/Redis_Pipelineä¼˜åŒ–RTT.html-2b2d7ac4.js" as="script"><link rel="prefetch" href="/assets/Redis_Sentinelé«˜å¯ç”¨.html-76122dc6.js" as="script"><link rel="prefetch" href="/assets/Redis_keyè®¾è®¡è§„èŒƒ.html-c32b7e33.js" as="script"><link rel="prefetch" href="/assets/Redisäº‹åŠ¡.html-13310412.js" as="script"><link rel="prefetch" href="/assets/Rediså†…å­˜æ·˜æ±°ç­–ç•¥.html-7a42143d.js" as="script"><link rel="prefetch" href="/assets/Rediså‘å¸ƒè®¢é˜….html-30df2941.js" as="script"><link rel="prefetch" href="/assets/Rediså¤åˆ¶.html-afccffb0.js" as="script"><link rel="prefetch" href="/assets/Rediså¤§keyå’Œçƒ­keyé—®é¢˜.html-2a429912.js" as="script"><link rel="prefetch" href="/assets/Redisæ…¢æŸ¥è¯¢æ—¥å¿—.html-7fb28de1.js" as="script"><link rel="prefetch" href="/assets/RedisæŒä¹…åŒ–æœºåˆ¶.html-f309041e.js" as="script"><link rel="prefetch" href="/assets/Redisé”®ç©ºé—´é€šçŸ¥(keyspace notification).html-a050c269.js" as="script"><link rel="prefetch" href="/assets/redis-cli ä½¿ç”¨.html-beaf3643.js" as="script"><link rel="prefetch" href="/assets/01-RocketMQæ¦‚è¿°.html-5ac57bd3.js" as="script"><link rel="prefetch" href="/assets/02-NameServerå¯åŠ¨æµç¨‹.html-f758bc6f.js" as="script"><link rel="prefetch" href="/assets/03-Brokerå¯åŠ¨æµç¨‹.html-f1f38e7f.js" as="script"><link rel="prefetch" href="/assets/04-RocketMQç½‘ç»œé€šä¿¡åŸç†.html-a01b1fe4.js" as="script"><link rel="prefetch" href="/assets/05-RocketMQ æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„å¯åŠ¨.html-fd0c4273.js" as="script"><link rel="prefetch" href="/assets/06-RocketMQç½‘ç»œé€šä¿¡æºç .html-7221abdf.js" as="script"><link rel="prefetch" href="/assets/07-NameServerä½œç”¨å’Œè·¯ç”±å…ƒä¿¡æ¯.html-9c11de50.js" as="script"><link rel="prefetch" href="/assets/08-NameServerè·¯ç”±ç®¡ç†æºç åˆ†æ.html-d6775935.js" as="script"><link rel="prefetch" href="/assets/09-ç”Ÿäº§è€…ç›¸å…³ç±»åˆ†æ.html-1f66f8fd.js" as="script"><link rel="prefetch" href="/assets/10-ç”Ÿäº§è€…å¯åŠ¨æµç¨‹.html-cf0e3229.js" as="script"><link rel="prefetch" href="/assets/11-ç”Ÿäº§è€…å‘é€æ¶ˆæ¯.html-a8dd07ce.js" as="script"><link rel="prefetch" href="/assets/12-Brokerå­˜å‚¨æœºåˆ¶æ¦‚è¿°.html-56a34e57.js" as="script"><link rel="prefetch" href="/assets/13-MappedFileå’ŒMappedFileQueueåˆ†æ.html-51b1a88f.js" as="script"><link rel="prefetch" href="/assets/14-CommitLogåŸç†åˆ†æ.html-53d9e538.js" as="script"><link rel="prefetch" href="/assets/15-brokerçš„åˆ·ç›˜æœºåˆ¶.html-47360dd3.js" as="script"><link rel="prefetch" href="/assets/16-ConsumeQueueå’ŒIndexåŸç†åˆ†æ.html-61304eaf.js" as="script"><link rel="prefetch" href="/assets/17-brokerè¿‡æœŸæ–‡ä»¶åˆ é™¤æœºåˆ¶.html-31ca9d94.js" as="script"><link rel="prefetch" href="/assets/18-æ¶ˆè´¹è€…å¯åŠ¨æµç¨‹(TODO).html-b366c59c.js" as="script"><link rel="prefetch" href="/assets/19-æ¶ˆæ¯æ‹‰å–å…¥å£å’Œæ¶ˆæ¯é˜Ÿåˆ—è´Ÿè½½å‡è¡¡.html-08767084.js" as="script"><link rel="prefetch" href="/assets/20-æ¶ˆè´¹è€…å‘é€æ¶ˆæ¯æ‹‰å–è¯·æ±‚æµç¨‹.html-5e06bc1b.js" as="script"><link rel="prefetch" href="/assets/21-brokerå¤„ç†æ¶ˆæ¯æ‹‰å–è¯·æ±‚-1-ä¸»æµç¨‹.html-b14fcfc4.js" as="script"><link rel="prefetch" href="/assets/22-brokerå¤„ç†æ¶ˆæ¯æ‹‰å–è¯·æ±‚-2-é•¿è½®è¯¢.html-444e2023.js" as="script"><link rel="prefetch" href="/assets/23-brokerå¤„ç†æ¶ˆæ¯æ‹‰å–è¯·æ±‚-3-è¯»å–æ¶ˆæ¯.html-4d9cae7a.js" as="script"><link rel="prefetch" href="/assets/24-æ¶ˆè´¹è€…å¤„ç†ä»brokeræ‹‰å–çš„æ¶ˆæ¯.html-c9541ed1.js" as="script"><link rel="prefetch" href="/assets/25-å¹¶å‘æ¶ˆè´¹åŸç†.html-02067138.js" as="script"><link rel="prefetch" href="/assets/001-æœåŠ¡å™¨CPUé—®é¢˜-è§„å¾‹æ€§å³°åˆº.html-edec70a1.js" as="script"><link rel="prefetch" href="/assets/002-æœåŠ¡å™¨CPUé…ç½®é™ä½GCåˆ†æ.html-0d16e306.js" as="script"><link rel="prefetch" href="/assets/003-æœåŠ¡å™¨CPUä½¿ç”¨ç‡è¾ƒä½ä½†ç³»ç»Ÿè´Ÿè½½é«˜.html-735934e2.js" as="script"><link rel="prefetch" href="/assets/004-log4j2å†…å­˜æ³„éœ²å¯¼è‡´çš„é¢‘ç¹fullgc.html-4fe94438.js" as="script"><link rel="prefetch" href="/assets/005-çº¿ç¨‹æ± çˆ¶å­ä»»åŠ¡ä½¿ç”¨ä¸å½“é€ æˆæ­»é”.html-24d29ebe.js" as="script"><link rel="prefetch" href="/assets/006-linuxç³»ç»Ÿå‚æ•°-è¿æ¥é˜Ÿåˆ—é•¿åº¦è¿‡å°å¯¼è‡´è¿æ¥ä¸¢å¼ƒ.html-46f0087c.js" as="script"><link rel="prefetch" href="/assets/007-redisé¢‘ç¹æ·˜æ±°-æ¸…é™¤redisçº¿ä¸Šæœªè®¾ç½®è¿‡æœŸæ—¶é—´çš„key.html-1a4a43a2.js" as="script"><link rel="prefetch" href="/assets/é¡¹ç›®-IMé•¿è¿æ¥ä¼˜åŒ–.html-3b215382.js" as="script"><link rel="prefetch" href="/assets/é¡¹ç›®-æœåŠ¡é™çº§.html-c2462644.js" as="script"><link rel="prefetch" href="/assets/é¡¹ç›®-çº¿ç¨‹æ± ä¼˜åŒ–.html-a27d212f.js" as="script"><link rel="prefetch" href="/assets/JUCç›¸å…³é—®é¢˜.html-1dbb4395.js" as="script"><link rel="prefetch" href="/assets/JVMé—®é¢˜.html-f7337349.js" as="script"><link rel="prefetch" href="/assets/MySQLç›¸å…³é—®é¢˜.html-fd490b89.js" as="script"><link rel="prefetch" href="/assets/index.html-e636cbf6.js" as="script"><link rel="prefetch" href="/assets/Redisç›¸å…³é—®é¢˜.html-59d01bd9.js" as="script"><link rel="prefetch" href="/assets/äºŒåˆ†æŸ¥æ‰¾.html-50b5cc6e.js" as="script"><link rel="prefetch" href="/assets/äºŒå‰æ ‘.html-3fb6f448.js" as="script"><link rel="prefetch" href="/assets/ä»£ç éšæƒ³å½•é¢˜ç›®ç›®å½•.html-94026b65.js" as="script"><link rel="prefetch" href="/assets/HowToSayResume.html-5d9188f5.js" as="script"><link rel="prefetch" href="/assets/index.html-93326795.js" as="script"><link rel="prefetch" href="/assets/resume.html-89295833.js" as="script"><link rel="prefetch" href="/assets/404.html-24d63cad.js" as="script"><link rel="prefetch" href="/assets/index.html-b8d9383f.js" as="script"><link rel="prefetch" href="/assets/index.html-1ada7363.js" as="script"><link rel="prefetch" href="/assets/index.html-a49bff32.js" as="script"><link rel="prefetch" href="/assets/index.html-aa2b08f4.js" as="script"><link rel="prefetch" href="/assets/index.html-da1936ee.js" as="script"><link rel="prefetch" href="/assets/index.html-dfd02179.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-2450701e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="vp-brand"><img class="vp-nav-logo" src="/å°ç†ŠçŒ«.png" alt><!----><!----></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a href="/EffectiveJava_note/" class="nav-link vp-sidebar-link vp-sidebar-page" aria-label="ã€ŠEffective Javaã€‹ç¬¬ä¸‰ç‰ˆé˜…è¯»ç¬”è®°"><!---->ã€ŠEffective Javaã€‹ç¬¬ä¸‰ç‰ˆé˜…è¯»ç¬”è®°<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html" class="router-link-active router-link-exact-active nav-link active vp-sidebar-link vp-sidebar-page active" aria-label="ç¬¬ä¸€ç« -åˆ›å»ºå’Œé”€æ¯å¯¹è±¡"><!---->ç¬¬ä¸€ç« -åˆ›å»ºå’Œé”€æ¯å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨"><!---->ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹"><!---->é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼"><!---->é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨-builder-æ¨¡å¼" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼"><!---->é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹"><!---->é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#å»ºé€ è€…-builder-æ¨¡å¼" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="å»ºé€ è€… builder æ¨¡å¼"><!---->å»ºé€ è€… builder æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼"><!---->ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#builder-æ¨¡å¼åº”ç”¨åœºæ™¯" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="builder æ¨¡å¼åº”ç”¨åœºæ™¯"><!---->builder æ¨¡å¼åº”ç”¨åœºæ™¯<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#builder-æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="builder æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"><!---->builder æ¨¡å¼çš„ä¼˜ç¼ºç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ–-singleton-å±æ€§" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§"><!---->ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•"><!---->å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹"><!---->é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼"><!---->ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›"><!---->é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº"><!---->ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡"><!---->é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨"><!---->æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><!---->éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#æ³¨æ„ç‚¹" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="æ³¨æ„ç‚¹"><!---->æ³¨æ„ç‚¹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ"><!---->ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#rocketmq-ä¸­çš„æ¡ˆä¾‹" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="RocketMQ ä¸­çš„æ¡ˆä¾‹"><!---->RocketMQ ä¸­çš„æ¡ˆä¾‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•"><!---->é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#try-with-resources-ä¼˜å…ˆäº-try-finally" class="router-link-active router-link-exact-active nav-link vp-sidebar-link vp-heading" aria-label="try-with-resources ä¼˜å…ˆäº try-finally"><!---->try-with-resources ä¼˜å…ˆäº try-finally<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ç¬¬ä¸€ç« -åˆ›å»ºå’Œé”€æ¯å¯¹è±¡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">è¶…å¨è“çŒ« Dylan Kwok</span></span><span property="author" content="è¶…å¨è“çŒ« Dylan Kwok"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-14T06:59:35.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 19 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT19M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨" class="router-link-active router-link-exact-active toc-link level2">ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹" class="router-link-active router-link-exact-active toc-link level3">é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨-builder-æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹" class="router-link-active router-link-exact-active toc-link level3">é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#å»ºé€ è€…-builder-æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">å»ºé€ è€… builder æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#builder-æ¨¡å¼åº”ç”¨åœºæ™¯" class="router-link-active router-link-exact-active toc-link level3">builder æ¨¡å¼åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#builder-æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" class="router-link-active router-link-exact-active toc-link level3">builder æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ–-singleton-å±æ€§" class="router-link-active router-link-exact-active toc-link level2">ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•" class="router-link-active router-link-exact-active toc-link level3">å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹" class="router-link-active router-link-exact-active toc-link level3">é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›" class="router-link-active router-link-exact-active toc-link level2">é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº" class="router-link-active router-link-exact-active toc-link level2">ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡" class="router-link-active router-link-exact-active toc-link level2">é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨" class="router-link-active router-link-exact-active toc-link level2">æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active toc-link level3">éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#æ³¨æ„ç‚¹" class="router-link-active router-link-exact-active toc-link level3">æ³¨æ„ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ" class="router-link-active router-link-exact-active toc-link level3">ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#rocketmq-ä¸­çš„æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">RocketMQ ä¸­çš„æ¡ˆä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•" class="router-link-active router-link-exact-active toc-link level2">é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/EffectiveJava_note/01-%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E5%AF%B9%E8%B1%A1.html#try-with-resources-ä¼˜å…ˆäº-try-finally" class="router-link-active router-link-exact-active toc-link level2">try-with-resources ä¼˜å…ˆäº try-finally</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><table><thead><tr><th>ç‰ˆæœ¬</th><th>å†…å®¹</th><th>æ—¶é—´</th></tr></thead><tbody><tr><td>V1</td><td>æ–°å»º</td><td>2023å¹´07æœˆ13æ—¥23:49:21</td></tr></tbody></table><p>ç¬¬ä¸€ç« ï¼šåˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼Œä¸»è¦åŒ…å«ä¸‹é¢ 9 æ¡ã€‚</p><ol><li>ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨ï¼›</li><li>é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼ï¼›</li><li>ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§ï¼›</li><li>é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›ï¼›</li><li>ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æºï¼›</li><li>é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼›</li><li>æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨ï¼›</li><li>é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•ï¼›</li><li>try-with-resources ä¼˜å…ˆäº try-finallyï¼›</li></ol><h2 id="ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨" tabindex="-1"><a class="header-anchor" href="#ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨" aria-hidden="true">#</a> ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£æ„é€ å™¨</h2><p>ä¸€ä¸ªç±»é™¤äº†å¯ä»¥æä¾›æ„é€ å™¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æä¾›ä¸€äº›è§åçŸ¥æ„çš„é™æ€å·¥å‚æ–¹æ³•å»è¿”å›è¯¥ç±»çš„å®ä¾‹ã€‚</p><h3 id="é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹" aria-hidden="true">#</a> é™æ€å·¥å‚æ–¹æ³•çš„ä¼˜ç‚¹</h3><ol><li><strong><!----></strong>ï¼Œè€Œæ„é€ å™¨çš„æ–¹æ³•ååªèƒ½æœ‰ä¸€ç§ã€‚è™½ç„¶æ„é€ å™¨å¯ä»¥é‡è½½ï¼Œä½†æ˜¯å¦‚æœé‡è½½çš„æ„é€ å™¨è¿‡å¤šçš„è¯ï¼Œä¼šå¯¹å¢åŠ ä½¿ç”¨çš„éš¾åº¦ï¼Œè°ƒç”¨è€…è¿˜è¦æ–Ÿé…Œç”¨å“ªä¸ªæ„é€ å™¨ï¼›</li><li><strong><!----></strong>ï¼ˆeg.å•ä¾‹æ¨¡å¼å’Œäº«å…ƒæ¨¡å¼ï¼‰ï¼›</li><li>**<!---->ï¼Œ**è¿™æ ·å¯ä»¥å±è”½ä¸€äº›ä¸æ˜¯ public çš„å­ç±»çš„å®ç°ï¼Œå‡å°‘è°ƒç”¨è€…çš„ä½¿ç”¨éš¾åº¦ã€‚ä¾‹å¦‚åœ¨ JDK çš„é›†åˆæ¡†æ¶ä¸­æœ‰è¿™æ ·ä¸€ä¸ªç±» java.util.Collectionsï¼Œè¿™ä¸ªç±»ä¸­æä¾›äº†ä¸å¯ä¿®æ”¹çš„é›†åˆã€ åŒæ­¥é›†åˆçš„å®ç°ï¼Œè¿™æ ·å¯ä»¥é€šè¿‡è°ƒç”¨ API ç›´æ¥è¿”å›å¸¦æœ‰æŒ‡å®šç‰¹æ€§ï¼ˆä¸å¯ä¿®æ”¹ã€åŒæ­¥ç­‰ï¼‰çš„é›†åˆï¼Œè¿™æ ·æˆ‘ä»¬çš„ API è°ƒç”¨è€…å°±ä¸ç”¨å»å…³ç³»å…¶å†…éƒ¨çš„å­ç±»æ˜¯å¦‚ä½•å®ç°è¿™äº›ç‰¹æ€§çš„ï¼›</li><li><strong><!----></strong>ï¼›</li><li><strong><!----></strong>ï¼›è¿™ä¸ªæœ‰ç‚¹å…¸å‹çš„æ¡ˆä¾‹æœ‰ SPI æœºåˆ¶ï¼ˆService Provider Interfaceï¼‰ï¼ŒSPI æ˜¯ä¸€ç§ç”¨äºå®ç°æ¾è€¦åˆã€å¯æ‰©å±•æ’ä»¶ç³»ç»Ÿçš„æœºåˆ¶ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶å‘ç°å’ŒåŠ è½½æŸä¸ªç‰¹å®šæœåŠ¡æ¥å£çš„æä¾›è€…ã€‚JDK è‡ªå¸¦çš„ ServiceLoader ç±»å®ç°äº† SPI æœºåˆ¶ï¼Œè¿˜æœ‰å…¶ä»–å¼€æºæ¡†æ¶ä¸­æœ‰å¤§é‡çš„ SPI çš„æ¡ˆä¾‹ï¼ˆJDBCã€æ—¥å¿—é—¨é¢ã€motan rpcã€dubboã€spring ç­‰ï¼‰ï¼›</li></ol><h3 id="é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼" aria-hidden="true">#</a> é™æ€å·¥å‚æ–¹æ³•çš„ç¼ºç‚¹ä»¥åŠå¼¥è¡¥æ–¹å¼</h3><ol><li><strong><!----></strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç»§æ‰¿è¿™ä¸ªç±»ã€‚ä¸è¿‡è¿™æ ·ä¹Ÿæœ‰ä¸ªå¥½å¤„å°±æ˜¯æˆ‘ä»¬å¯ä»¥å¤šå¤šä½¿ç”¨ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ï¼›</li><li><strong><!----></strong>ã€‚ Java è‡ªå¸¦çš„ API æ–‡æ¡£ä¼šæŠŠæ„é€ å™¨æ˜ç¡®çš„æ ‡æ³¨å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä»¬å†™çš„é™æ€å·¥å‚æ–¹æ³•å¹¶ä¸å®¹æ˜“è¢«å‘ç°ï¼›</li></ol><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›åˆé€‚çš„å‘½åæ¥å¼¥è¡¥é™æ€å·¥å‚æ–¹æ³•ä¸å®¹æ˜“è¢«å‘ç°çš„åŠ£åŠ¿ï¼š</p><ul><li><p><strong><!----></strong>ï¼šç±»å‹è½¬æ¢çš„æ–¹æ³•ï¼Œåªæœ‰å•ä¸ªå‚æ•°ï¼Œè¿”å›è¯¥ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚ä¾‹å¦‚ java.util.Date#from æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Date</span> <span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name">Instant</span> instant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>instant<span class="token punctuation">.</span><span class="token function">toEpochMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ï¼šèšåˆæ–¹æ³•ï¼Œå¸¦æœ‰å¤šä¸ªå‚æ•°ï¼Œè¿”å›è¯¥ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ï¼ŒæŠŠå®ƒä»¬åˆå¹¶èµ·æ¥ã€‚ä¾‹å¦‚ java.util.List#of(E, E, E) ç³»åˆ—æ–¹æ³•è¿”å›ä¸€ä¸ªä¸å¯å˜çš„ List å®ä¾‹ï¼ˆJDK 9 ä¹‹åï¼‰ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">E</span> e1<span class="token punctuation">,</span> <span class="token class-name">E</span> e2<span class="token punctuation">,</span> <span class="token class-name">E</span> e3<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ImmutableCollections</span><span class="token punctuation">.</span><span class="token function">listFromTrustedArray</span><span class="token punctuation">(</span>e1<span class="token punctuation">,</span> e2<span class="token punctuation">,</span> e3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ï¼šä¾‹å¦‚ java.lang.Integer#valueOf(java.lang.String) æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NumberFormatException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ï¼šè·å–ä¸€ä¸ªå®ä¾‹ï¼Œé™æ€å·¥å‚æ–¹æ³•å¯ä»¥æœ‰å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰å‚æ•°ï¼Œæ²¡æœ‰å‚æ•°çš„å¯ä»¥è§†ä¸ºé»˜è®¤çš„å®ç°ã€‚ä¾‹å¦‚ï¼šjava.util.Calendar#getInstance()</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Calendar</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">Locale</span> aLocale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token class-name">Locale<span class="token punctuation">.</span>Category</span><span class="token punctuation">.</span><span class="token constant">FORMAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">createCalendar</span><span class="token punctuation">(</span><span class="token function">defaultTimeZone</span><span class="token punctuation">(</span>aLocale<span class="token punctuation">)</span><span class="token punctuation">,</span> aLocale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ï¼šè·å–ä¸€ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªå‘½åå¼ºè°ƒçš„æ˜¯æ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼šjava.lang.reflect.Array#newInstance(java.lang.Class&lt;?&gt;, int)</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> componentType<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">NegativeArraySizeException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">newArray</span><span class="token punctuation">(</span>componentType<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ï¼šè¿™é‡Œçš„ type è¡¨ç¤ºé™æ€å·¥å‚æ–¹æ³•éœ€è¦è¿”å›çš„å¯¹è±¡çš„ç±»å‹çš„åå­—ï¼Œä¸»è¦æ˜¯å·¥å‚æ–¹æ³•å¤„äºä¸åŒçš„ç±»ä¸­çš„æ—¶å€™ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼šjava.lang.Class#getConstructor</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> parameterTypes<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">SecurityException</span> <span class="token punctuation">{</span>
    <span class="token function">checkMemberAccess</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token constant">PUBLIC</span><span class="token punctuation">,</span> <span class="token class-name">Reflection</span><span class="token punctuation">.</span><span class="token function">getCallerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">getConstructor0</span><span class="token punctuation">(</span>parameterTypes<span class="token punctuation">,</span> <span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token constant">PUBLIC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ï¼šè¿™é‡Œçš„ type è¡¨ç¤ºé™æ€å·¥å‚æ–¹æ³•éœ€è¦è¿”å›çš„å¯¹è±¡çš„ç±»å‹çš„åå­—ï¼Œä¸»è¦æ˜¯å·¥å‚æ–¹æ³•å¤„äºä¸åŒçš„ç±»ä¸­çš„æ—¶å€™ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼šjava.lang.Class#newInstance</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...... çœç•¥å…·ä½“å®ç° ......</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨-builder-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨-builder-æ¨¡å¼" aria-hidden="true">#</a> é‡åˆ°å¤šä¸ªæ„é€ å™¨å‚æ•°æ—¶è€ƒè™‘ä½¿ç”¨ builder æ¨¡å¼</h2><h3 id="é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹" aria-hidden="true">#</a> é™æ€å·¥å‚å’Œæ„é€ å™¨çš„ç¼ºç‚¹</h3><p>é™æ€å·¥å‚å’Œæ„é€ å™¨æœ‰ä¸€ä¸ªå…±åŒçš„ç¼ºç‚¹ï¼Œå®ƒä»¬åœ¨å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹çš„æ‰©å±•æ€§å¹¶ä¸å¥½ï¼Œä¾‹å¦‚æœ‰äº›å‚æ•°å¯èƒ½æ˜¯å¿…å¡«çš„ï¼Œæœ‰äº›å‚æ•°å¯èƒ½æ˜¯å¯é€‰çš„ã€‚å…ˆè¯´ä¸¤ç§å¹¶ä¸æ˜¯æœ€ä¼˜çš„å¤„ç†ï¼šâ‘  ä½¿ç”¨æ„é€ å‡½æ•°é‡è½½çš„æ–¹å¼å»å¤„ç†å¤šä¸ªå‚æ•°ï¼›â‘¡ åˆ›å»ºå¥½ JavaBean åï¼Œè°ƒç”¨å¯¹åº”çš„ set æ–¹æ³•ï¼›</p><ol><li>ä½¿ç”¨<strong>æ„é€ å‡½æ•°é‡è½½</strong>çš„æ–¹æ¡ˆçš„ç¼ºç‚¹æ˜¯<strong>å®¢æˆ·ç«¯è°ƒç”¨èµ·æ¥ä¸æ–¹ä¾¿ï¼Œè€Œä¸”æ¯”è¾ƒéš¾é˜…è¯»</strong>ï¼›</li><li><strong>åˆ›å»º JavaBean åè°ƒç”¨ set æ–¹æ³•å»è®¾ç½®å‚æ•°</strong>ï¼Œç¼ºç‚¹æ˜¯åœ¨åˆ›å»ºå¯¹è±¡ç„¶åè®¾ç½®å‚æ•°æ˜¯å¤šä¸ªæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨<strong>å®ä¾‹æ„é€ çš„è¿‡ç¨‹ä¸­ JavaBean å¯èƒ½å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€</strong>ï¼Œå¯¼è‡´ä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼›</li></ol><h3 id="å»ºé€ è€…-builder-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å»ºé€ è€…-builder-æ¨¡å¼" aria-hidden="true">#</a> å»ºé€ è€… builder æ¨¡å¼</h3><p>ä¸Šé¢ä¸¤ç§è§£å†³æ–¹æ¡ˆå¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼ŒEffective Java ä½œè€…æ¨èä½¿ç”¨ builder æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯å»ºé€ è€…æ¨¡å¼æ¥å¤„ç†å¤šä¸ªå‚æ•°çš„æƒ…å†µã€‚çœ‹ä¸€ä¸ªæ¡ˆä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>   <span class="token comment">// å¿…å¡«</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> hobby<span class="token punctuation">;</span>  <span class="token comment">// å¯é€‰</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> career<span class="token punctuation">;</span> <span class="token comment">// å¯é€‰</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">PersonBuilder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> hobby<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> career<span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token class-name">PersonBuilder</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PersonBuilder</span> <span class="token function">personBuilder</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PersonBuilder</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">PersonBuilder</span> <span class="token function">withHobby</span><span class="token punctuation">(</span><span class="token class-name">String</span> hobby<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>hobby <span class="token operator">=</span> hobby<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">PersonBuilder</span> <span class="token function">withCareer</span><span class="token punctuation">(</span><span class="token class-name">String</span> career<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>career <span class="token operator">=</span> career<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            person<span class="token punctuation">.</span>career <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>career<span class="token punctuation">;</span>
            person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            person<span class="token punctuation">.</span>hobby <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hobby<span class="token punctuation">;</span>
            <span class="token keyword">return</span> person<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­ name æ˜¯å¿…å¡«çš„å±æ€§ï¼Œæ‰€ä»¥åœ¨åˆ›å»º PersonBuilder çš„æ—¶å€™å¿…å¡«ï¼Œå…¶ä½™çš„å±æ€§åœ¨å„è‡ªçš„ with å¼€å¤´çš„æ–¹æ³•é‡Œé¢å»æ„å»ºã€‚è°ƒç”¨æ–¹çš„æ„å»ºä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token class-name">PersonBuilder</span><span class="token punctuation">.</span><span class="token function">personBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;åƒç&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">withCareer</span><span class="token punctuation">(</span><span class="token string">&quot;ADC&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">withHobby</span><span class="token punctuation">(</span><span class="token string">&quot;å°è®°&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼" aria-hidden="true">#</a> ç±»å±‚æ¬¡çš„å»ºé€ è€…æ¨¡å¼</h3><p><strong>æŠ½è±¡ç±»æœ‰æŠ½è±¡çš„ builderï¼Œå…·ä½“ç±»æœ‰å…·ä½“çš„ builderã€‚</strong></p><p>å…ˆçœ‹ä¸€ä¸ªæŠ½è±¡çš„ Phone ç±»ï¼ŒPhone ç±»å†…éƒ¨æœ‰ä¸€ä¸ªæŠ½è±¡çš„ Builderï¼Œéœ€è¦å­ç±»å®ç°çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š</p><ol><li>ä¸€ä¸ªæ˜¯ build æ–¹æ³•ï¼Œæ„å»ºä¸€ä¸ª Phone å¯¹è±¡å‡ºæ¥ï¼›</li><li>ä¸€ä¸ªæ˜¯ self æ–¹æ³•ï¼Œè¯¥æ–¹æ³•éœ€è¦å­ç±»å®ç°è¿”å› â€œthisâ€ï¼Œç”¨æ¥ç»„æˆé“¾å¼è°ƒç”¨ï¼›</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span> <span class="token comment">// å“ç‰Œ</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> size<span class="token punctuation">;</span>  <span class="token comment">// å°ºå¯¸</span>

    <span class="token keyword">public</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> builder<span class="token punctuation">.</span>brand<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> builder<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span> <span class="token comment">// å“ç‰Œ</span>
        <span class="token keyword">private</span> <span class="token class-name">Double</span> size<span class="token punctuation">;</span>  <span class="token comment">// å°ºå¯¸</span>

        <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">withBrand</span><span class="token punctuation">(</span><span class="token class-name">String</span> brand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">withSize</span><span class="token punctuation">(</span><span class="token class-name">Double</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/* æ„å»ºä¸€ä¸ªå®ä¾‹ */</span>
        <span class="token keyword">abstract</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/* å­ç±»å¿…é¡»é‡è½½è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å› &#39;this&#39; */</span>
        <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token class-name">T</span> <span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹ä¸€ä¸ªå­ç±» SmartPhone çš„å®ç°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">SmartPhone</span> <span class="token keyword">extends</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> games3D<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartPhone</span><span class="token punctuation">(</span><span class="token class-name">SmartPhoneBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>games3D <span class="token operator">=</span> builder<span class="token punctuation">.</span>games3D<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SmartPhoneBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SmartPhoneBuilder</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> games3D<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">SmartPhoneBuilder</span> <span class="token function">withGames3D</span><span class="token punctuation">(</span><span class="token class-name">String</span> games3D<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>games3D <span class="token operator">=</span> games3D<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SmartPhone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token class-name">SmartPhoneBuilder</span> <span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartPhone<span class="token punctuation">.</span>SmartPhoneBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withBrand</span><span class="token punctuation">(</span><span class="token string">&quot;å°ç±³&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withSize</span><span class="token punctuation">(</span><span class="token number">7.2</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withGames3D</span><span class="token punctuation">(</span><span class="token string">&quot;å°ç±³æªæˆ˜&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å­ç±»çš„æ„å»ºå™¨ä¸­çš„ build æ–¹æ³•ï¼Œéƒ½å£°æ˜è¿”å›æ­£ç¡®çš„å­ç±»ã€‚ä¾‹å¦‚åœ¨å­ç±» SmartPhone ä¸­çš„ build æ–¹æ³•å°±æ˜¯è¿”å›çš„ SmartPhone å¯¹è±¡å®ä¾‹ã€‚</p><h3 id="builder-æ¨¡å¼åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#builder-æ¨¡å¼åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> builder æ¨¡å¼åº”ç”¨åœºæ™¯</h3><p><strong>å¦‚æœç±»çš„æ„é€ å™¨æˆ–è€…é™æ€å·¥å‚æ–¹æ³•ä¸­æœ‰å¤šä¸ªå‚æ•°ï¼Œè®¾è®¡è¿™ç§ç±»çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ Builder æ¨¡å¼ã€‚</strong></p><h3 id="builder-æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#builder-æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" aria-hidden="true">#</a> builder æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š<strong><!----></strong>ï¼›</p><p>ç¼ºç‚¹ï¼š</p><ol><li><strong><!----></strong>ã€‚è™½ç„¶åˆ›å»ºè¿™ä¸ªæ„å»ºå™¨çš„å¼€é”€å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œå¦‚æœæ˜¯æŸäº›ååˆ†æ³¨é‡æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å°±æœ‰é—®é¢˜äº†ï¼›</li><li>builder æ¨¡å¼æ¯”æ„é€ å‡½æ•°é‡è½½è¿˜è¦å†—é•¿ï¼Œæ‰€ä»¥å®ƒåªæœ‰åœ¨å¤šä¸ªå‚æ•°çš„æ—¶å€™æ‰ä½¿ç”¨ï¼Œæ¯”å¦‚ 4 ä¸ªæˆ–è€…æ›´å¤šä¸ªå‚æ•°ï¼›</li></ol><blockquote><p>å¦‚æœæŸä¸ªç±»çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œå»ºè®®ä¸€å¼€å§‹å°±ä½¿ç”¨ builder æ¨¡å¼ã€‚å¦‚æœä¸€å¼€å§‹ä½¿ç”¨çš„æ˜¯æ„é€ å‡½æ•°æˆ–è€…é™æ€å·¥å‚æ–¹æ³•ï¼Œåé¢å‚æ•°å˜å¤šååˆæ”¹ä¸º builder æ¨¡å¼çš„è¯ï¼Œè¿™æ—¶å€™ä¹‹å‰é‚£äº›è¿‡æ—¶çš„æ„é€ å‡½æ•°å’Œé™æ€å·¥å‚æ–¹æ³•å°±ä¼šæ˜¾å¾—ä¸åè°ƒäº†ã€‚</p></blockquote><h2 id="ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ–-singleton-å±æ€§" tabindex="-1"><a class="header-anchor" href="#ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ–-singleton-å±æ€§" aria-hidden="true">#</a> ç”¨ç§æœ‰æ„é€ å™¨æˆ–è€…æšä¸¾ç±»å‹å¼ºåŒ– Singleton å±æ€§</h2><blockquote><p>å…¶å®å°±æ˜¯å•ä¾‹æ¨¡å¼çš„ä¸€äº›å†™æ³•ï¼Œä½†æ˜¯æœ¬æ¬¡å¹¶ä¸æ˜¯åˆ†æå•ä¾‹æ¨¡å¼æœ‰å¤šå°‘æ¬¡å†™æ³•ï¼Œè¿™é‡Œä¸»è¦é˜è¿°çš„æ˜¯ä½œè€…åœ¨æ–‡ä¸­çš„è§‚ç‚¹</p></blockquote><h3 id="å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•" tabindex="-1"><a class="header-anchor" href="#å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•" aria-hidden="true">#</a> å®ç°å•ä¾‹çš„ä¸¤ç§å†™æ³•</h3><p>ç¬¬ä¸€ç§å°±æ˜¯ç›´æ¥ä½¿ç”¨ä¸€ä¸ª public çš„é™æ€çš„ final åŸŸï¼Œç§æœ‰åŒ–æ„é€ å‡½æ•°ã€‚ä¸ºäº†é˜²æ­¢åå°„åˆ›å»ºå®ä¾‹ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­åšäº†åˆ¤ç©ºå¤„ç†ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Person</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">INSTANCE</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·ä¸è¦é‡å¤æ„é€ !!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§å’Œä¸Šé¢å·®ä¸å¤šï¼Œåªä¸è¿‡æ˜¯ä½¿ç”¨çš„é™æ€å·¥å‚æ–¹æ³•è¿”å›å•ä¾‹å¯¹è±¡ã€‚ä¹Ÿæ˜¯éœ€è¦ç§æœ‰åŒ–æ„é€ å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Person</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">INSTANCE</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·ä¸è¦é‡å¤æ„é€ !!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Person</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹" tabindex="-1"><a class="header-anchor" href="#é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹" aria-hidden="true">#</a> é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹</h3><p>ä¸ºäº†é˜²æ­¢ååºåˆ—åŒ–åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¯ä»¥åœ¨ç±»ä¸­å¢åŠ ä¸€ä¸ª readResolve() æ–¹æ³•ï¼Œå¹¶è¿”å›å•ä¾‹å¯¹è±¡ã€‚è¿™æ ·å°±å¯ä»¥é˜²æ­¢ååºåˆ—åŒ–ç ´åå•ä¾‹ã€‚å…·ä½“çš„åŸç†æ˜¯ååºåˆ—åŒ–çš„æ—¶å€™ä¼šåˆ¤æ–­å½“å‰ç±»ä¸­æ˜¯å¦æœ‰ readResolve() æ–¹æ³•ï¼Œå¦‚æœæœ‰çš„è¯å°±ä¼šç›´æ¥æ‹¿ readResolve() æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºååºåˆ—åŒ–åå¾—åˆ°çš„å®ä¾‹ã€‚</p><p>å…·ä½“çš„æºç å¯ä»¥å»çœ‹ java.io.ObjectInputStream#readOrdinaryObject çš„å®ç°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Person</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å¤æ‹‰åŠ æ–¯å¤§è‚šå­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">INSTANCE</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·ä¸è¦é‡å¤æ„é€ !!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Person</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è°ƒç”¨äº† readResolve() æ–¹æ³•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; è¯´ä½ å¥½...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼" aria-hidden="true">#</a> ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹æ¨¡å¼</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token constant">JIU_TONG</span><span class="token punctuation">;</span> <span class="token comment">// é…’æ¡¶</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token constant">JIU_TONG</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨æšä¸¾å®ç°å•ä¾‹æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„æ–¹å¼ï¼ŒJava å¯¹æšä¸¾çš„å¤„ç†å·²ç»ä¿è¯å•ä¸ªæšä¸¾å€¼æ˜¯å•ä¾‹çš„äº†ï¼Œè€Œä¸”æ— æ³•é€šè¿‡åå°„å’Œåºåˆ—åŒ–å»ç ´åå•ä¾‹ã€‚å¯ä»¥å»åç¼–è¯‘æŸ¥çœ‹æšä¸¾çš„æºç ï¼Œå°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆã€‚</p><h2 id="é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›" aria-hidden="true">#</a> é€šè¿‡ç§æœ‰æ„é€ å™¨å¼ºåŒ–ä¸å¯å®ä¾‹åŒ–çš„èƒ½åŠ›</h2><p><strong>æœ‰äº›å·¥å…·ç±»æä¾›äº†ä¸€äº›é™æ€æ–¹æ³•ï¼Œå…¶å®æˆ‘ä»¬å¹¶ä¸éœ€è¦å®ä¾‹åŒ–å·¥å…·ç±»ï¼Œå› ä¸ºå®ä¾‹åŒ–å®ƒä»¬æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å·¥å…·ç±»ä¸­æä¾›ä¸€ä¸ªç§æœ‰çš„æ„é€ å‡½æ•°æ¥é˜²æ­¢å®ƒè¢«å®ä¾‹åŒ–ã€‚</strong></p><p>ä¾‹å¦‚ JDK çš„ java.lang.Math ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Math</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Don&#39;t let anyone instantiate this class.
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Math</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// ...... çœç•¥å…¶ä»– ......</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆæ¯”å¦‚ JDK çš„ java.util.Arrays</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...... çœç•¥å…¶ä»– ......</span>

    <span class="token comment">// Suppresses default constructor, ensuring non-instantiability.</span>
    <span class="token keyword">private</span> <span class="token class-name">Arrays</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 
    <span class="token comment">// ...... çœç•¥å…¶ä»– ......</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç§æœ‰æ„é€ å‡½æ•°å¸¦æ¥çš„é—®é¢˜å°±æ˜¯æ— æ³•å­ç±»åŒ–è¯¥ç±»ï¼Œå› ä¸ºå­ç±»æ— æ³•è°ƒç”¨çˆ¶ç±»çš„ private çš„æ„é€ å‡½æ•°ã€‚</p><h2 id="ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº" tabindex="-1"><a class="header-anchor" href="#ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº" aria-hidden="true">#</a> ä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥æ¥å¼•ç”¨èµ„æº</h2><p>è¿™ä¸ªæ„æ€å…¶å®å°±æ˜¯è¯´ï¼Œå‡å¦‚æŸä¸ªç±»ä¾èµ–äº†å¦å¤–ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œä¼˜å…ˆè€ƒè™‘ä¾èµ–æ³¨å…¥çš„æ–¹å¼ã€‚çœ‹ä¸ªæ¡ˆä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClusterApi</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">HaService</span> haService<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LoadBalance</span> loadBalance<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ClusterApi</span><span class="token punctuation">(</span><span class="token class-name">HaService</span> haService<span class="token punctuation">,</span> <span class="token class-name">LoadBalance</span> loadBalance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>haService <span class="token operator">=</span> haService<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loadBalance <span class="token operator">=</span> loadBalance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">HaService</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LoadBalance</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡å¦‚ ClusterApi æ˜¯é›†ç¾¤ç›¸å…³çš„ API ç±»ï¼Œå†…éƒ¨éœ€è¦ä½¿ç”¨ HA é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡çš„æœåŠ¡çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ³¨å…¥åˆ° ClusterApi ä¸­ã€‚</p><blockquote><p>è¿™æ ·çœ‹èµ·æ¥å¥½åƒæˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸€ç›´åœ¨ç”¨ä¾èµ–æ³¨å…¥å•Šï¼Œå…¶å®è¿™äº›éƒ½æ˜¯ Spring å¸®æˆ‘ä»¬åšå¥½äº†ï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶çš„å°±ç”¨äº†ã€‚</p></blockquote><h2 id="é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡" aria-hidden="true">#</a> é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½é‡ç”¨å•ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éœ€è¦çš„æ—¶å€™å°±åˆ›å»ºä¸€ä¸ªç›¸åŒåŠŸèƒ½çš„æ–°å¯¹è±¡ã€‚å¦‚æœå¯¹è±¡æ˜¯ä¸å¯å˜ï¼ˆimmutableï¼‰çš„å¯¹è±¡ï¼Œå®ƒå°±å§‹ç»ˆå¯ä»¥è¢«é‡ç”¨ã€‚</p><p>çœ‹å‡ ä¸ªæ¡ˆä¾‹ï¼š</p><ul><li><p>å…³äº String å¯¹è±¡çš„åˆ›å»ºï¼Œå¦‚æœä½¿ç”¨ <code>String s = new String(&quot;nihao&quot;)</code> åˆ›å»ºå­—ç¬¦ä¸²ï¼Œå…¥å‚ <code>nihao</code> å…¶å®å°±æ˜¯ä¸€ä¸ª String å®ä¾‹ï¼Œè¿™æ ·å°±ä¼šå¤šåˆ›å»º String å®ä¾‹ã€‚å»ºè®®ç›´æ¥ä½¿ç”¨ <code>String s = &quot;nihao&quot;</code>ï¼Œå› ä¸ºåœ¨ JVM ä¸­æœ‰ä¸ªå­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œä¼šé‡ç”¨å­—ç¬¦ä¸²ï¼›</p></li><li><p><strong><!----></strong>ã€‚ä¾‹å¦‚åœ¨ java.lang.Integer#valueOf ç³»åˆ—æ–¹æ³•ä¸­å®ç°äº†ç¼“å­˜æœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜æ‰ä¼šå»åˆ›å»º Integer å®ä¾‹ï¼Œå¯ä»¥é¿å…åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼›</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å‡å¦‚ i çš„å¤§å°å‘½ä¸­äº†ç¼“å­˜ï¼Œç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„å¯¹è±¡</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// æœªå‘½ä¸­ç¼“å­˜åˆ™æ–°å»ºä¸€ä¸ª Integer å¯¹è±¡</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¯¹äºé‚£äº›åˆ›å»ºå’Œå›æ”¶ä»£ä»·å¾ˆå°çš„å°å¯¹è±¡ï¼Œå°±ä¸é€‚åˆä½¿ç”¨å¯¹è±¡æ± æ¥é‡ç”¨è¿™äº›å¯¹è±¡äº†ï¼›</p></li><li><p><strong><!----></strong>ã€‚ä¸¾ä¸ªä¾‹å­å§ï¼Œæ¯”å¦‚ HashMap çš„ java.util.HashMap#keySet æ–¹æ³•ï¼Œæ¯æ¬¡è¿”å› Map å¯¹è±¡çš„ Set è§†å›¾ã€‚è¿™é‡Œå¾ˆæ˜æ˜¾çœ‹åˆ°æ¯æ¬¡è¿”å›éƒ½æ˜¯è¿”å›ç›¸åŒçš„ keySet å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> ks <span class="token operator">=</span> keySet<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ks <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        keySet <span class="token operator">=</span> ks<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ks<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><!----></strong>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Long</span> boxSum <span class="token operator">=</span> <span class="token number">0L</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> boxStart <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    boxSum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;box waste time, &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> boxStart<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">long</span> unboxSum <span class="token operator">=</span> <span class="token number">0L</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> unboxStart <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    unboxSum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;unbox waste time, &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> unboxStart<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ§åˆ¶å°æ‰“å°å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ²¡æœ‰è‡ªåŠ¨è£…ç®±çš„æ“ä½œèŠ±è´¹çš„æ—¶é—´å¤§å¤§å‡å°‘äº†ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>box waste time, 4415ms.
unbox waste time, 862ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨" aria-hidden="true">#</a> æ¶ˆé™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨</h2><h3 id="éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> éšè”½çš„å†…å­˜æ³„æ¼é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><p>åœ¨æ”¯æŒåƒåœ¾å›æ”¶çš„è¯­è¨€ä¸­ï¼Œå†…å­˜æ³„æ¼æ˜¯ååˆ†éšè”½çš„ï¼Œä½œè€…ç§°è¿™ç±»å†…å­˜æ³„æ¼ä¸º â€œæ— æ„è¯†çš„å¯¹è±¡ä¿æŒâ€ ï¼ˆunintentional object retentionï¼‰ã€‚<strong><!----></strong></p><p>ä¿®å¤æ–¹æ¡ˆéå¸¸ç®€å•ï¼š<strong><!----></strong>ã€‚</p><h3 id="æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„ç‚¹" aria-hidden="true">#</a> æ³¨æ„ç‚¹</h3><p><strong><!----></strong>ã€‚</p><p>å…³äºå†…å­˜æ³„æ¼çš„æ¥æºæœ‰ä¸‹é¢å‡ ç§ï¼š</p><ol><li><strong>åªè¦æ˜¯ç±»è‡ªå·±ç®¡ç†å†…å­˜ï¼Œç¨‹åºå‘˜å°±åº”è¯¥è­¦æƒ•å†…å­˜æ³„æ¼çš„é—®é¢˜</strong>ï¼›å¸¸è§çš„å¦‚æ•°ç»„çš„å…ƒç´ ï¼Œåé¢å†ä¸¾ä¸€ä¸ª RocketMQ çš„ä¾‹å­ï¼›</li><li><strong>ç¼“å­˜ä¹Ÿæ˜¯å†…å­˜æ³„æ¼çš„ä¸€ä¸ªæ¥æºï¼ˆè¿™é‡Œçš„ç¼“å­˜æ˜¯æœ¬åœ°ç¼“å­˜çš„æ¦‚å¿µï¼‰</strong>ï¼Œå› ä¸ºâ€ç¼“å­˜é¡¹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å¦æœ‰æ„ä¹‰â€œå¹¶ä¸å®¹å™¨è¢«ç¡®å®šï¼Œæ‰€ä»¥åº”è¯¥æ—¶ä¸æ—¶çš„æ¸…é™¤è°ƒæ²¡æœ‰ç”¨çš„æ•°æ®ã€‚ä¾‹å¦‚å¯ä»¥é€šè¿‡ java.util.LinkedHashMap#removeEldestEntry æ¥å®ç°ä¸€ä¸ª LRUï¼›</li><li><strong>å†…å­˜æ³„æ¼çš„ç¬¬ä¸‰ä¸ªå¸¸è§æ¥æºæ˜¯ç›‘å¬å™¨å’Œå…¶ä»–å›è°ƒ</strong>ã€‚ å¦‚æœä½ å®ç°äº†ä¸€ä¸ª APIï¼Œå®¢æˆ·ç«¯åœ¨è¿™ä¸ª API ä¸­æ³¨å†Œå›è°ƒï¼Œå´æ²¡æœ‰æ˜¾å¼åœ°å–æ¶ˆæ³¨å†Œï¼Œé‚£ä¹ˆé™¤éä½ é‡‡å–æŸäº›åŠ¨ä½œï¼Œå¦åˆ™å®ƒä»¬å°±ä¼šä¸æ–­åœ°å †ç§¯èµ·æ¥ ã€‚</li></ol><h3 id="ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> ç®€æ˜“æ ˆçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ</h3><p>å…ˆçœ‹ä¸‹ä½œè€…ç»™çš„æ¡ˆä¾‹ï¼Œä¸€ä¸ªç®€æ˜“æ ˆçš„å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span> <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Object</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        elements<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> elements<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elements<span class="token punctuation">.</span>length <span class="token operator">==</span> size<span class="token punctuation">)</span>
            elements <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ pop æ–¹æ³•ä¼šå‡ºç°æ¯”è¾ƒéšè”½çš„å†…å­˜æ³„æ¼ï¼Œå…³é”®ç‚¹å°±æ˜¯åœ¨ <code>elements[--size]</code> è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯å°† size å‡ 1 äº†ï¼Œè¿™æ ·ä¹‹å‰çš„å…ƒç´ åªæ˜¯æˆ‘ä»¬è®¿é—®ä¸åˆ°äº†ï¼Œå¹¶æ²¡æœ‰è¢«åˆ é™¤ï¼Œå®ƒå’Œå®ƒå¼•ç”¨çš„é‚£äº›å¯¹è±¡éƒ½ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œè¿™å°±å‡ºç°äº†å†…å­˜æ³„æ¼äº†ã€‚è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> result <span class="token operator">=</span> elements<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    elements<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// Eliminate obsolete reference</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®å°±æ˜¯æ˜¾ç¤ºçš„å°†ç”¨ä¸åˆ°çš„å¯¹è±¡ç½®ç©ºå°±è¡Œäº†ï¼Œhelp gcã€‚</p><h3 id="rocketmq-ä¸­çš„æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#rocketmq-ä¸­çš„æ¡ˆä¾‹" aria-hidden="true">#</a> RocketMQ ä¸­çš„æ¡ˆä¾‹</h3><p>RocketMQ ä¸­çš„æ¶ˆè´¹è€…éœ€è¦å» broker æ‹‰å–æ¶ˆæ¯å»æ¶ˆè´¹ï¼Œå…¶ä¸­ broker çš„è¿”å›å¯¹è±¡å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PullResultExt</span> <span class="token keyword">extends</span> <span class="token class-name">PullResult</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">long</span> suggestWhichBrokerId<span class="token punctuation">;</span>
    <span class="token comment">// ä»ç½‘ç»œä¸­è¯»å–æ¶ˆæ¯åˆ—è¡¨ä¸­çš„å±æ€§</span>
    <span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> messageBinary<span class="token punctuation">;</span>
 
	<span class="token comment">// ...... çœç•¥å…¶ä»– ......   </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ messageBinary æ˜¯ broker è¿”å›çš„æ¶ˆæ¯çš„å­—èŠ‚æ•°ç»„ï¼Œæ¶ˆè´¹è€…è¿™è¾¹éœ€è¦è¿›è¡Œè§£ç ï¼Œè§£ç ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">PullResult</span> <span class="token function">processPullResult</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">MessageQueue</span> mq<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">PullResult</span> pullResult<span class="token punctuation">,</span>
	<span class="token keyword">final</span> <span class="token class-name">SubscriptionData</span> subscriptionData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">PullResultExt</span> pullResultExt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PullResultExt</span><span class="token punctuation">)</span> pullResult<span class="token punctuation">;</span>

	<span class="token comment">// ...... çœç•¥å…¶ä»–å¤„ç† ......</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">PullStatus</span><span class="token punctuation">.</span><span class="token constant">FOUND</span> <span class="token operator">==</span> pullResult<span class="token punctuation">.</span><span class="token function">getPullStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// æ¶ˆæ¯è½¬æ¢æˆ ByteBUffer</span>
		<span class="token class-name">ByteBuffer</span> byteBuffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>pullResultExt<span class="token punctuation">.</span><span class="token function">getMessageBinary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// è§£ç </span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MessageExt</span><span class="token punctuation">&gt;</span></span> msgList <span class="token operator">=</span> <span class="token class-name">MessageDecoder</span><span class="token punctuation">.</span><span class="token function">decodes</span><span class="token punctuation">(</span>byteBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// ...... çœç•¥è¿‡æ»¤å¤„ç† ......</span>

		<span class="token comment">// å°†å†æ¬¡è¿‡æ»¤åçš„æ¶ˆæ¯ listï¼Œä¿å­˜åˆ° pullResult ä¸­</span>
		pullResultExt<span class="token punctuation">.</span><span class="token function">setMsgFoundList</span><span class="token punctuation">(</span>msgListFilterAgain<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// help gc</span>
	pullResultExt<span class="token punctuation">.</span><span class="token function">setMessageBinary</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> pullResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…³é”®ç‚¹å°±æ˜¯å°† byte æ•°ç»„è½¬ç æˆæ¶ˆè´¹è€…è¯†åˆ«çš„å¯¹è±¡åï¼Œä¿å­˜åˆ°æ–°çš„å­—æ®µä¸­å»äº†ï¼Œæœ€åä¼šå°†å­—èŠ‚æ•°ç»„å­—æ®µç½®ç©ºï¼Œhelp gcï¼Œå°±æ˜¯ <code>pullResultExt.setMessageBinary(null)</code></p><h2 id="é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•" aria-hidden="true">#</a> é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•</h2><p>ç»ˆç»“æ–¹æ³•ï¼ˆfinalizerï¼‰é€šå¸¸æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œä¹Ÿæ˜¯å¾ˆå±é™©çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸å¿…è¦çš„ã€‚ä½¿ç”¨ç»ˆç»“æ–¹æ³•ä¼šå¯¼è‡´è¡Œä¸ºä¸ç¨³å®šã€æ€§èƒ½é™ä½ï¼Œä»¥åŠå¯ç§»æ¤æ€§çš„é—®é¢˜ã€‚ä¸€èˆ¬éœ€è¦é¿å…ä½¿ç”¨ç»ˆç»“æ–¹æ³•ã€‚åœ¨ Java9 ä¸­ç”¨æ¸…é™¤æ–¹æ³•ï¼ˆcleanerï¼‰ä»£æ›¿äº†ç»ˆç»“æ–¹æ³•ã€‚æ¸…é™¤æ–¹æ³•æ²¡æœ‰ç»ˆç»“æ–¹æ³•é‚£ä¹ˆå±é™©ï¼Œä½†ä»ç„¶æ˜¯ä¸å¯é¢„æµ‹ã€è¿è¡Œç¼“æ…¢çš„ï¼Œä¸€èˆ¬æƒ…å†µä¹Ÿæ˜¯ä¸å»ºè®®ä½¿ç”¨çš„ã€‚</p><p>ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•éƒ½æœ‰çš„é—®é¢˜ï¼š</p><ul><li>ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•æœ‰éå¸¸ä¸¥é‡çš„æ€§èƒ½æŸå¤±ï¼›</li><li>ç»ˆç»“æ–¹æ³•å’Œæ¸…é™¤æ–¹æ³•ä¸ä¿è¯ä¼šè¢«åŠæ—¶æ‰§è¡Œï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«è§†ä¸ºä¸å¯è¾¾æ—¶ï¼Œæ‰ä¼šå»è°ƒç”¨å®ƒä»¬çš„ç»ˆç»“æ–¹æ³•æˆ–æ¸…é™¤æ–¹æ³•ï¼Œè¿™æ®µæ—¶é—´æ˜¯æ— æ³•æ§åˆ¶çš„ï¼Œè¿™ä¸ªç°è±¡åœ¨ä¸åŒçš„ JVM ä¸­çš„æ•ˆæœä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼›</li></ul><p>ç»ˆç»“æ–¹æ³•ç‹¬æœ‰çš„é—®é¢˜ï¼š</p><ul><li>è°ƒç”¨ç»ˆç»“æ–¹æ³•çš„çº¿ç¨‹æ˜¯ä¸€ä¸ªä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œæ‰€ä»¥ç»ˆç»“æ–¹æ³•çš„æ‰§è¡Œæ•ˆç‡åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¹¶ä¸é«˜ï¼›</li><li>ç»ˆç»“æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœå¿½ç•¥åœ¨ç»ˆç»“è¿‡ç¨‹ä¸­è¢«æŠ›å‡ºæ¥çš„æœªè¢«æ•è·çš„å¼‚å¸¸ï¼Œè¯¥å¯¹è±¡çš„ç»ˆç»“è¿‡ç¨‹ä¹Ÿä¼šè¢«ç»ˆæ­¢ã€‚å¦‚æœå¼‚å¸¸å‘ç”Ÿåœ¨ç»ˆç»“æ–¹æ³•ä¸­ï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºæ ˆè½¨è¿¹ï¼Œç”šè‡³è¿è­¦å‘Šéƒ½ä¸ä¼šæ‰“å°å‡ºæ¥ï¼›</li></ul><p><strong><!----></strong>ã€‚</p><h2 id="try-with-resources-ä¼˜å…ˆäº-try-finally" tabindex="-1"><a class="header-anchor" href="#try-with-resources-ä¼˜å…ˆäº-try-finally" aria-hidden="true">#</a> try-with-resources ä¼˜å…ˆäº try-finally</h2><p>Java ç±»åº“ä¸­æœ‰è®¸å¤šéœ€è¦é€šè¿‡ close æ–¹æ³•æ¥æ‰‹åŠ¨å…³é—­çš„èµ„æºã€‚ä¾‹å¦‚ InputStreamã€OutputStream å’Œ java.sql.Connectionã€‚ä½†æ˜¯å®¢æˆ·ç«¯å¾€å¾€ä¼šå¿˜è®°å…³é—­èµ„æºã€‚</p><p>try-finally è¯­å¥æ˜¯ç¡®ä¿èµ„æºå…³é—­çš„æœ€ä½³æ–¹å¼ï¼Œå°±ç®—å‘é€å¼‚å¸¸æˆ–è€…è¿”å›ä¹Ÿä¼šè°ƒç”¨ finally åçš„è¯­å¥ã€‚ä½†æ˜¯ try-finally å¯¹å…³é—­å¤šä¸ªèµ„æºå¹¶ä¸å‹å¥½ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">BUFFER_SIZE</span> <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token comment">// try-finally is ugly when used with more than one resource! (Page 34)</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">String</span> src<span class="token punctuation">,</span> <span class="token class-name">String</span> dst<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">OutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token constant">BUFFER_SIZE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> n<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Java7 å¼•å…¥äº† try-with-resource çš„è¯­å¥ã€‚ä½¿ç”¨è¿™ä¸ªè¯­å¥çš„å‰ææ˜¯ï¼Œè¦è¢« close çš„èµ„æºå¿…é¡»å®ç° AutoCloseable æ¥å£ï¼Œå…¶ä¸­åŒ…å«äº†å•ä¸ªè¿”å› void çš„ close æ–¹æ³•ã€‚Java ç±»åº“å’Œå…¶ä»–ç¬¬ä¸‰æ–¹ç±»åº“ä¸­ï¼Œç°åœ¨éƒ½å®ç°æˆ–è€…æ‰©å±•äº† AutoCloseable æ¥å£ã€‚å¦‚æœç¼–å†™äº†ä¸€ä¸ªç±»ï¼Œå®ƒä»£è¡¨çš„æ˜¯å¿…é¡»å…³é—­çš„èµ„æºï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¹Ÿåº”è¯¥å®ç° AutoCloseable æ¥å£</strong>ã€‚ä¸Šé¢çš„æ¡ˆä¾‹æ”¹é€ å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">BUFFER_SIZE</span> <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">;</span>

<span class="token comment">// try-with-resources on multiple resources - short and sweet (Page 35)</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">String</span> src<span class="token punctuation">,</span> <span class="token class-name">String</span> dst<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span>   in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">OutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>dst<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token constant">BUFFER_SIZE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><!----></strong></p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: guosgbin@163.com">Dylan Kwok</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a href="/EffectiveJava_note/" class="nav-link active prev" aria-label="ã€ŠEffective Javaã€‹ç¬¬ä¸‰ç‰ˆé˜…è¯»ç¬”è®°"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->ã€ŠEffective Javaã€‹ç¬¬ä¸‰ç‰ˆé˜…è¯»ç¬”è®°</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-ad2dff0a.js" defer></script>
  </body>
</html>
